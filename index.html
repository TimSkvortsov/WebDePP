<!DOCTYPE html>
<html lang="en" class="h-100">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DePolymerase Predictor (DePP) - Web version</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/pyodide/v0.23.0/full/pyodide.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://unpkg.com/jquery-resizable-columns@0.2.3/dist/jquery.resizableColumns.css" rel="stylesheet">
    <script src="https://unpkg.com/jquery-resizable-columns@0.2.3/dist/jquery.resizableColumns.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css">
    <script src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.4/dist/extensions/resizable/bootstrap-table-resizable.min.js"></script>



</head>
<body class="d-flex flex-column h-100">
    <div class="container-fluid p-3 bg-primary text-white">
        <div class="row">
            <div class="col-sm-2 text-center">
                <img class="img-max" src="./assets/DePP.png" alt="DePP logo">
            </div>
            <div class="col-sm-10">
                <h1>DePolymerase Predictor</h1>
                <h6>The first ML phage depolymerase predictor running in your browser!<h6>
            </div>
        </div>
    </div>
    <div class="container-fluid p-3">
        <div class="row">
            <div class="col-md-8">
                <h2>About</h2>
                <p>This is a web version of the DePolymerase Predictor (DePP) tool described in 
                <a href="https://doi.org/10.1101/2023.02.28.530424">Magill & Skvortsov (2023)</a>
                    paper. DePP is a machine learning tool that predicts the probability of a protein
                    being a phage depolymerase.
                </p>
            </div>
        </div>
    </div>
    <div class="container-fluid p-3">
        <h2>Instructions</h2>
        <p id="loading-status"></p>
        <div class="row align-items-center mb-2">
            <div class="col-md-2">
                <input class="form-control" type="file" id="fasta-upload" accept=".fasta,.faa,.fa">
            </div>
            <div class="col-sm-6">1. Select a FASTA file containing protein sequences for analysis.</div>
        </div>
        <div class="row align-items-center mb-3">
            <div class="col-md-2">
                <input class="form-control" type="file" id="training-upload" accept=".csv">
            </div>
            <div class="col-md-6">2. [Optional] Select a training set (default training set is used if not provided).</div>
        </div>
        <div class="row align-items-center mb-1">
            <div class="col-md-2">
                <button type="button" class="btn btn-secondary same-width-btn" id="calculate-parameters">Calculate Protein Parameters</button>
            </div>
            <div class="col-md-6">3. Click "Calculate Protein Parameters" to generate a dataframe with protein parameters.</div>
        </div>
        <div class="row align-items-center mb-1">
            <div class="col-md-2">
                <button type="button" class="btn btn-secondary same-width-btn" id="predict-depolymerases">Predict Phage Depolymerases</button>
            </div>
            <div class="col-md-6">4. Click "Predict Phage Depolymerases" to predict the probability of proteins being phage depolymerases.</div>
        </div>
        <div class="row align-items-center mb-3">
            <div class="col-md-2">
                <button type="button" class="btn btn-secondary same-width-btn" id="display-predictions">Display Predictions</button>
            </div>
            <div class="col-md-6">5. Click "Display Predictions" to show the analysis results in a table.</div>
        </div>
        <div class="row align-items-center mb-3">
            <div class="col-md-2">
                <button type="button" class="btn btn-secondary same-width-btn  mb-1" id="save-parameters">Save Protein Parameters to CSV</button>
                <button type="button" class="btn btn-secondary same-width-btn" id="save-predictions">Save Predictions to CSV</button>
            </div>
            <div class="col-md-6">6. Save the results to CSV files as needed.</div>
        </div>
        <div class="row align-items-center mb-1">
            <div class="col-md-2">
                <button type="button" class="btn btn-danger same-width-btn" id="reset">Reset</button>
            </div>
            <div class="col-md-6">7. [Optional] Reset all settings and inputs for a new analysis.</div>
        </div>
    </div>
    <div class="container-fluid p-3">
        <div class="row">
            <div class="col-md-8">
                <div id="table-container"></div>
            </div>
        </div>
    </div>


    <footer class="footer mt-auto">
        <div class="container-fluid p-1 bg-primary text-white text-center">
            <span><small>DePolymerase Predictor (DePP) - Web version 1.0.0 | 2023 | Damian Magill & Timofey Skvortsov</small></span>
        </div>
    </footer>

    <script src="js/scripts.js" defer></script>
</body>
</html>